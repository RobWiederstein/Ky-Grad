stick("a")
stick <- function(thing){
print(as.character(thing))
print(get("thing"))
}
stick(a)
SAAR1999 <- 1
stick <- function(thing){
print(as.character(thing))
print(get("thing"))
}
stick(SAAR1999)
stick("SAAR1999")
stick <- function(thing){
print(as.character(thing))
print(get(thing))
}
stick(SAAR1999)
get("SAAR1999")
stick <- function(thing){
print(as.character(thing))
print(get("thing"))
}
stick(SAAR1999)
stick("SAAR1999")
ls(pattern = "^SAAR")
SAAR1999 <- 1
year <- ls(pattern = "^SAAR")
?substring
year <- substr(ls(pattern = "^SAAR"), 4, 8)
year <- substr(ls(pattern = "^SAAR"), 5, 8)
SAAR1999 <- spruce_SAAR1999(import_SAAR1999())
names <- ls(pattern = "^SAAR")
year <- substr(ls(pattern = "^SAAR"), 5, 8)
SAAR1999$year <- rep(year, nrow(SAAR1999))
?ls
?mget
mget(a)
mget("a")
unlist(mget("a"))
get("a")
source('~/Dropbox/R-Projects/kgp/R/main_SAAR.R', echo=TRUE)
source('~/Dropbox/R-Projects/kgp/R/main_SAAR.R', echo=TRUE)
source('~/Dropbox/R-Projects/kgp/R/main_SAAR.R', echo=TRUE)
source('~/Dropbox/R-Projects/kgp/R/main_SAAR.R', echo=TRUE)
source('~/Dropbox/R-Projects/kgp/R/main_SAAR.R', echo=TRUE)
names <- ls(pattern = "^SAAR")
year <- substr(ls(names, 5, 8)
year <- substr(ls(names, 5, 8))
names <- ls(pattern = "^SAAR")
year <- substr(ls(names, 5, 8))
names <- ls(pattern = "^SAAR")
year <- substr(names, 5, 8)
env()
?as.environment
stick <- function(thing){
stick <- function(thing){
print(as.character(thing))
}
stick(SAAR1999)
stick <- function(thing){
print(as.character(thing))
}
stick(SAAR1999)
stick <- function(thing){
print(ls(pattern = "^SAAR"))
stick <- function(thing){
print(ls(pattern = "^SAAR"))
}
stick(SAAR1999)
stick <- function(thing){
print(ls(pattern = "^SAAR"))
}
stick(SAAR1999)
stick <- function(thing){
print(ls(pattern = "^SAAR", environ = -1L))
}
stick(SAAR1999)
wide_2_long_1999 <- function(temp){
library(reshape)
temp$year <- rep(1999, nrow(temp))
names(temp) <- tolower(names(temp))
temp <- melt(temp, id.vars = c("year", "district"), variable_name = "grade")
}
SAAR1999 < wide_2_long_1999(SAAR1999)
wide_2_long_1999 <- function(temp){
library(reshape)
temp$year <- rep(1999, nrow(temp))
names(temp) <- tolower(names(temp))
temp <- melt(temp, id.vars = c("year", "district"), variable_name = "grade")
}
SAAR1999 <- wide_2_long_1999(SAAR1999)
source("./R/functions_SAAR.R")
SAAR1999 <- wide_2_long_1999(spruce_SAAR1999(import_SAAR1999()))
SAAR2000 <- wide_2_long_2000(spruce_SAAR2000(import_SAAR2000()))
SAAR2001 <- wide_2_long_2001(spruce_SAAR2001(import_SAAR2001()))
SAAR2002 <- wide_2_long_2002(spruce_SAAR2002(import_SAAR2002()))
SAAR2003 <- wide_2_long_2003(spruce_SAAR2003(import_SAAR2003()))
SAAR2004 <- wide_2_long_2004(spruce_SAAR2004(import_SAAR2004()))
SAAR2005 <- wide_2_long_2005(spruce_SAAR2005(import_SAAR2005()))
SAAR2006 <- wide_2_long_2006(spruce_SAAR2006(import_SAAR2006()))
SAAR2007 <- wide_2_long_2007(spruce_SAAR2007(import_SAAR2007()))
SAAR2008 <- wide_2_long_2008(spruce_SAAR2008(import_SAAR2008()))
SAAR2009 <- wide_2_long_2009(spruce_SAAR2009(import_SAAR2009()))
SAAR2010 <- wide_2_long_2010(spruce_SAAR2010(import_SAAR2010()))
SAAR2011 <- wide_2_long_2011(spruce_SAAR2011(import_SAAR2011()))
SAAR2012 <- wide_2_long_2012(spruce_SAAR2012(import_SAAR2012()))
SAAR2013 <- wide_2_long_2013(spruce_SAAR2013(import_SAAR2013()))
?do.call
ls(pattern = "^SAAR...")
mget(ls(pattern = "^SAAR..."))
a <- rbind(mget(ls(pattern = "^SAAR...")))
a <- data.frame(rbind(mget(ls(pattern = "^SAAR..."))))
View(a)
a <- rbind(mget(ls(pattern = "^SAAR...")))
View(a)
?rbind
a <- rbind(SAAR1999, SAAR2000, SAAR2001)
paste("SAAR", 1999:2013)
paste("SAAR", 1999:2013, sep = "")
mget(paste("SAAR", 1999:2013, sep = ""))
a <- rbind(mget(paste("SAAR", 1999:2013, sep = "")))
a <- data.frame(rbind(mget(paste("SAAR", 1999:2013, sep = ""))))
paste("SAAR", 1999:2013, sep = "")
?print
print(paste("SAAR", 1999:2013, sep = ""), quote = F)
df <- rbind(SAAR1999, SAAR2000, SAAR2001, SAAR2002, SAAR2003, SAAR2004,
SAAR2005, SAAR2006, SAAR2007, SAAR2008, SAAR2009, SAAR2010,
SAAR2011, SAAR2012, SAAR2013
)
View(df)
rm (a)
class(df)
df <- data.frame(
rbind(
SAAR1999, SAAR2000, SAAR2001, SAAR2002, SAAR2003, SAAR2004,
SAAR2005, SAAR2006, SAAR2007, SAAR2008, SAAR2009, SAAR2010,
SAAR2011, SAAR2012, SAAR2013
),
stringsAsFactors = F
)
?I
unique(df$grade)
nrow(subset(df, grade == "x8"))
nrow(subset(df, district == "Adair County" & grade == "x8"))
subset(df, district == "Adair County" & grade == "x8")
subset(df, year == 2013 & grade == "x8")
nrow(subset(df, year == 2013 & grade == "x8"))
?save
save(df, file = SAAR_1999_2013.RData)
save(df, file = "./objects")
save(df, file = "./objects/")
save(df, file = "saar")
unlink("saar")
home <- getwd()
home
dir <- "objects"
home <- getwd()
dir <- "objects"
file <- "saar_1999_2013"
myfile <- paste(home, dir, file, sep = "/")
myfile
save(df, file = myfile)
rm(list = ls())
ls()
dir()
dir.list()
list.dir()
list.dirs()
source("./R/functions_SAAR.R")
SAAR1999 <- wide_2_long_1999(spruce_SAAR1999(import_SAAR1999()))
SAAR2000 <- wide_2_long_2000(spruce_SAAR2000(import_SAAR2000()))
SAAR2001 <- wide_2_long_2001(spruce_SAAR2001(import_SAAR2001()))
SAAR2002 <- wide_2_long_2002(spruce_SAAR2002(import_SAAR2002()))
SAAR2003 <- wide_2_long_2003(spruce_SAAR2003(import_SAAR2003()))
SAAR2004 <- wide_2_long_2004(spruce_SAAR2004(import_SAAR2004()))
SAAR2005 <- wide_2_long_2005(spruce_SAAR2005(import_SAAR2005()))
SAAR2006 <- wide_2_long_2006(spruce_SAAR2006(import_SAAR2006()))
SAAR2007 <- wide_2_long_2007(spruce_SAAR2007(import_SAAR2007()))
SAAR2008 <- wide_2_long_2008(spruce_SAAR2008(import_SAAR2008()))
SAAR2009 <- wide_2_long_2009(spruce_SAAR2009(import_SAAR2009()))
SAAR2010 <- wide_2_long_2010(spruce_SAAR2010(import_SAAR2010()))
SAAR2011 <- wide_2_long_2011(spruce_SAAR2011(import_SAAR2011()))
SAAR2012 <- wide_2_long_2012(spruce_SAAR2012(import_SAAR2012()))
SAAR2013 <- wide_2_long_2013(spruce_SAAR2013(import_SAAR2013()))
#combine dataframes
df <- data.frame(
rbind(
SAAR1999, SAAR2000, SAAR2001, SAAR2002, SAAR2003, SAAR2004,
SAAR2005, SAAR2006, SAAR2007, SAAR2008, SAAR2009, SAAR2010,
SAAR2011, SAAR2012, SAAR2013
),
stringsAsFactors = F
)
source("./R/functions_SAAR.R")
source("./R/functions_SAAR.R")
df <- merge_saar()
source("./R/functions_SAAR.R")
df <- merge_SAAR_ALL()
source("./R/functions_SAAR.R")
write_SAAR_ALL()
rm(list = ls())
source("./R/functions_SAAR.R")
write_SAAR_ALL()
rm(list = ls())
source("./R/functions_SAAR.R")
write_SAAR_ALL()
source("./R/functions_SAAR.R")
write_SAAR_ALL()
rm (list = ls())
load("./objects/saar_1999_2013")
View(df)
source("./R/functions_SAAR.R")
write_SAAR_ALL()
rm (list = ls())
devtools::install_github('jbryer/DataCache')
library("DataCache", lib.loc="/Library/Frameworks/R.framework/Versions/3.1/Resources/library")
demo()
Demos(error.catching)
error.catching()
errors()
errors
Demos("error.catching")
demo(package = .pacages(all.available = T))
demo(package = .packages(all.available = T))
demo(package = .base))
demo(package = .base)
demo(package = base)
?demo
demo(error.catching, package = "base")
str( tryCatch.W.E( log( -1) ) )
List of 2
$ value  : num NaN
$ warning:List of 2
..$ message: chr "NaNs produced"
..$ call   : language log(-1)
..- attr(*, "class")= chr [1:3] "simpleWarning" "warning" "condition"
demo
demo()
demo(WeatherCache, package = DataCache )
demo(WeatherCache, package = "DataCache" )
wd <- getwd()
file <- paste (wd, "data sets", "Grad Rate 2003-2007.csv", sep = "/")
gr <- read.csv (file = file, sep = ",", header = TRUE,
strip.white = TRUE,
colClasses = "character")
wd <- getwd()
file <- paste (wd, "data_raw", "Grad Rate 2003-2007.csv", sep = "/")
gr <- read.csv (file = file, sep = ",", header = TRUE,
strip.white = TRUE,
colClasses = "character")
file <- paste (wd, "objects", "SAAR.1999.2013.csv", sep = "/")
saar <- read.csv (file = file, sep = ",", header = T,
strip.white = T,
colClasses = "character")
View(gr)
wd <- getwd()
file <- paste (wd, "data_raw", "Grad Rate 2003-2007.csv", sep = "/")
gr <- read.csv (file = file, sep = ",", header = TRUE,
strip.white = TRUE,
colClasses = "character")
gr <- gr [, c(4, 5, grep ("GRADS_4YR", names (gr)))]
wd <- getwd()
file <- paste (wd, "data_raw", "Grad Rate 2003-2007.csv", sep = "/")
gr <- read.csv (file = file, sep = ",", header = TRUE,
strip.white = TRUE,
colClasses = "character")
gr <- gr [, c(4, 5, grep ("GRADS_4YR", names (gr)))]
gr <- gr [SCHNAME == "---DISTRICT TOTAL---", ]
head(gr)
gr <- gr [gr$SCHNAME == "---DISTRICT TOTAL---", ]
head(gr)
gr <- gr [, -2]
head(gr)
names(gr)[2:6] <- paste ("Grad.w.Diploma.in.4.years", 2002:2006, "KDE", sep = ".")
names(gr)[1]   <- "DISTRICT"
gr[grep ("Walton", gr$DISTRICT),1] <- "Walton Verona Independent"
names(gr)[2:6] <- paste ("Grad.w.Diploma.in.4.years", 2002:2006, "KDE", sep = ".")
names(gr)[1]   <- "DISTRICT"
gr[grep ("Walton", gr$DISTRICT),1] <- "Walton Verona Independent"
source('~/Dropbox/R-Projects/kgp/R/functions_grads.R', echo=TRUE)
source('~/Dropbox/R-Projects/kgp/R/functions_grads.R', echo=TRUE)
wd <- getwd()
file <- paste (wd, "objects", "SAAR.1999.2013.csv", sep = "/")
saar <- read.table (file, header = TRUE, sep = ",")
AFGR <- read.csv(file = paste (wd, "data sets", "AFGR_2012.csv", sep = "/"),
sep = ",",
header = TRUE,
strip.white = TRUE,
colClasses = "character")
AFGR <- read.csv(file = paste (wd, "data_raw", "AFGR_2012.csv", sep = "/"),
sep = ",",
header = TRUE,
strip.white = TRUE,
colClasses = "character")
View(AFGR)
wd <- getwd()
file <- paste (wd, "objects", "SAAR.1999.2013.csv", sep = "/")
saar <- read.table (file, header = TRUE, sep = ",")
AFGR <- read.csv(file = paste (wd, "data_raw", "AFGR_2012.csv", sep = "/"),
sep = ",",
header = TRUE,
strip.white = TRUE,
colClasses = "character")
#switch to subset?  More readable?  No brackets.
attach (AFGR)
#Diploma Recipients from KDE (DR.**) by year.  Because 1 yr lag, 2012 is for 2010-2011 school year.
#Code uses first year of school year, contrary to KDE naming conventions
DR.07 <- AFGR[ which(Gender=='Total' & Ethnicity=='Total' & School.Name == 'DISTRICT TOTAL' & School.Year == '2008'), c (1, 5, 10)]
DR.08 <- AFGR[ which(Gender=='Total' & Ethnicity=='Total' & School.Name == 'DISTRICT TOTAL' & School.Year == '2009'), c (1, 5, 10)]
DR.09 <- AFGR[ which(Gender=='Total' & Ethnicity=='Total' & School.Name == 'DISTRICT TOTAL' & School.Year == '2010'), c (1, 5, 10)]
DR.10 <- AFGR[ which(Gender=='Total' & Ethnicity=='Total' & School.Name == 'DISTRICT TOTAL' & School.Year == '2011'), c (1, 5, 10)]
DR.11 <- AFGR[ which(Gender=='Total' & Ethnicity=='Total' & School.Name == 'DISTRICT TOTAL' & School.Year == '2012'), c (1, 5, 10)]
rm (AFGR)
detach (AFGR)
#create a common column for merge with SAAR data
index <- as.data.frame (saar$DISTRICT, stringsAsFactors = F)
names (index) <- "DISTRICT"
DR.07[84, 2]  <- "Jefferson County"
DR.07[91, 2]  <- "LaRue County"
DR.07[110, 2] <- "McCracken County"
DR.07[111, 2] <- "McCreary County"
DR.07[112, 2] <- "McLean County"
DR.07[142, 2] <- "Raceland Independent"
DR.07[160, 2] <- "Walton Verona Independent"
#assign common column to DR.** for merge
DR.08[,2] <- DR.07[,2]
DR.09[,2] <- DR.07[,2]
DR.10[,2] <- DR.07[,2]
DR.11[,2] <- DR.07[,2]
#assign common column name "DISTRICT"
names(DR.07)[2] <- "DISTRICT"
names(DR.08)[2] <- "DISTRICT"
names(DR.09)[2] <- "DISTRICT"
names(DR.10)[2] <- "DISTRICT"
names(DR.11)[2] <- "DISTRICT"
#merge
afgr.07.11 <- merge(DR.07, DR.08, by = "DISTRICT", all = T)
afgr.07.11 <- merge(afgr.07.11, DR.09, by = "DISTRICT", all = T)
afgr.07.11 <- merge(afgr.07.11, DR.10, by = "DISTRICT", all = T)
afgr.07.11 <- merge(afgr.07.11, DR.11, by = "DISTRICT", all = T)
afgr.07.11 <- afgr.07.11 [, c(1,3,5,7,9,11)]
names(afgr.07.11)[2:6] <- paste ("Grad.w.Diploma.in.4.years", 2007:2011, "KDE", sep = ".")
wd <- getwd()
file <- paste (wd, "objects", "SAAR.1999.2013.csv", sep = "/")
saar <- read.table (file, header = TRUE, sep = ",")
AFGR <- read.csv(file = paste (wd, "data_raw", "AFGR_2012.csv", sep = "/"),
sep = ",",
header = TRUE,
strip.white = TRUE,
colClasses = "character")
View(AFGR)
?subset
df <- subset(AFGR, Gender=='Total' &
Ethnicity=='Total' &
School.Name == 'DISTRICT TOTAL' &
School.Year == '2008'), c (1, 5, 10)])
df <- subset(AFGR, Gender=='Total' &
Ethnicity=='Total' &
School.Name == 'DISTRICT TOTAL' &
), c (1, 5, 10)])
df <- subset(AFGR, Gender=='Total' &
Ethnicity=='Total' &
School.Name == 'DISTRICT TOTAL'
), c (1, 5, 10)])
df <- subset(AFGR, Gender=='Total' &
Ethnicity=='Total' &
School.Name == 'DISTRICT TOTAL'), c (1, 5, 10))
df <- subset(AFGR, Gender=='Total')
df <- subset(AFGR, Gender == 'Total' & Ethnicity == 'Total')
df <- subset(AFGR, Gender == 'Total' & Ethnicity == 'Total' &
School.Name == 'DISTRICT TOTAL')
df <- subset(AFGR, Gender == 'Total' & Ethnicity == 'Total' &
School.Name == 'DISTRICT TOTAL',
c (1, 5, 10))
AFGR <- read.csv(file = paste (wd, "data_raw", "AFGR_2012.csv", sep = "/"),
sep = ",",
header = TRUE,
strip.white = TRUE,
colClasses = "character")
df <- subset(AFGR, subset = Gender == 'Total' & Ethnicity == 'Total' &
School.Name == 'DISTRICT TOTAL')
df <- subset(AFGR, Gender == 'Total' & Ethnicity == 'Total' &
School.Name == 'DISTRICT TOTAL')
View(df)
School.Name == 'DISTRICT TOTAL', 1)
,
df <- subset(AFGR, Gender == 'Total' & Ethnicity == 'Total' &
School.Name == 'DISTRICT TOTAL', 1)
df <- subset(AFGR, Gender == 'Total' & Ethnicity == 'Total' &
School.Name == 'DISTRICT TOTAL',
select = "School.Year)
df <- subset(AFGR, Gender == 'Total' & Ethnicity == 'Total' &
School.Name == 'DISTRICT TOTAL',
select = "School.Year")
df <- subset(AFGR, Gender == 'Total' & Ethnicity == 'Total' &
School.Name == 'DISTRICT TOTAL',
select = School.Year)
df <- subset(AFGR, Gender == 'Total' & Ethnicity == 'Total' &
School.Name == 'DISTRICT TOTAL',
select = School.Year & District.Name)
df <- subset(AFGR, Gender == 'Total' & Ethnicity == 'Total' &
School.Name == 'DISTRICT TOTAL',
select = School.Year & District.Name)
df <- subset(AFGR, Gender == 'Total' & Ethnicity == 'Total' &
School.Name == 'DISTRICT TOTAL',
select = c(School.Year, District.Name))
df <- subset(AFGR, Gender == 'Total' & Ethnicity == 'Total' &
School.Name == 'DISTRICT TOTAL',
select = c(School.Year, District.Name,
Graduates.with.Diploma.in.4.years))
View(df)
df <- subset(AFGR,
subset = (Gender == 'Total' &
Ethnicity == 'Total' &
School.Name == 'DISTRICT TOTAL'),
select = c(School.Year,
District.Name,
Graduates.with.Diploma.in.4.years)
)
head(df)
names(df)[1] <- "Year"
names(df)[2] <- "DISTRICT"
names(df)
unique(df$DISTRICT)
df$DISTRICT[grep("Jefferson County Public School")]
df$DISTRICT[grep("Jefferson County Public School", df$DISTRICT)]
df$DISTRICT[grep("Jefferson County Public School", df$DISTRICT)] <- "Jefferson County"
unique(df$DISTRICT)
df$DISTRICT[grep("Larue County", df$DISTRICT)] <- "LaRue County"
unique(df$DISTRICT)
df$DISTRICT[grep("Mccracken County", df$DISTRICT)] <- "McCracken County"
df$DISTRICT[grep("Mccreary County", df$DISTRICT)] <- "McCreary County"
unique(df$DISTRICT)
df$DISTRICT[grep("Walton-Verona Independent", df$DISTRICT)] <- "Walton Verona Independent"
setdiff(unique(df$DISTRICT), unique(AFGR$District.Name))
unique(df$Year)
which(df$Year == 2012)
df$Year[which(df$Year == 2012)] <- "2011a"
unique(df$Year)
df$Year[which(df$Year == "2011")] <- "2010a"
df$Year[which(df$Year == "2010")] <- "2009a"
df$Year[which(df$Year == "2009")] <- "2008a"
unique(df$Year)
df$Year[which(df$Year == "2008")] <- "2007a"
unique(df$Year)
df$Year <- gsub("a", "", df$Year)
unique(df$Year)
df$Year <- as.integer(df$Year)
unique(df$Year)
str(df$Year)
wd <- getwd()
wd <- getwd()
path <- "objects"
file <- "afgr.07.11"
file  <- paste (wd, path, file, sep = "/")
file
save(df, file = file)
source('~/Dropbox/R-Projects/kgp/R/functions_grads.R', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
#zzz <- get_grads_2007_2011
zzz <- get_grads_2007_2011
zzz <- get_grads_2007_2011()
source('~/Dropbox/R-Projects/kgp/R/functions_grads.R', echo=TRUE)
wd <- getwd()
AFGR <- read.csv(file = paste (wd, "data_raw", "AFGR_2012.csv", sep = "/"),
sep = ",",
header = TRUE,
strip.white = TRUE,
colClasses = "character")
#switch to subset?  More readable?  No brackets.
#Diploma Recipients from KDE (DR.**) by year.  Because 1 yr lag, 2012 is for 2010-2011 school year.
#Code uses first year of school year, contrary to KDE naming conventions
df <- subset(AFGR,
subset = (Gender == 'Total' &
Ethnicity == 'Total' &
School.Name == 'DISTRICT TOTAL'),
select = c(School.Year,
District.Name,
Graduates.with.Diploma.in.4.years)
)
df$DISTRICT[grep("Jefferson County Public School", df$DISTRICT)] <- "Jefferson County"
df$DISTRICT[grep("Larue County", df$DISTRICT)] <- "LaRue County"
df$DISTRICT[grep("Mccracken County", df$DISTRICT)] <- "McCracken County"
df$DISTRICT[grep("Mccreary County", df$DISTRICT)] <- "McCreary County"
df$DISTRICT[grep("Raceland-Worthington Independe", df$DISTRICT)] <- "Raceland Independent"
names(df)[2] <- "DISTRICT"
names(df)[1] <- "Year"
df$DISTRICT[grep("Jefferson County Public School", df$DISTRICT)] <- "Jefferson County"
df$DISTRICT[grep("Larue County", df$DISTRICT)] <- "LaRue County"
df$DISTRICT[grep("Mccracken County", df$DISTRICT)] <- "McCracken County"
df$DISTRICT[grep("Mccreary County", df$DISTRICT)] <- "McCreary County"
df$DISTRICT[grep("Raceland-Worthington Independe", df$DISTRICT)] <- "Raceland Independent"
df$DISTRICT[grep("Walton-Verona Independent", df$DISTRICT)] <- "Walton Verona Independent"
#Diploma Recipients from KDE (DR.**) by year.  Because 1 yr lag, 2012 is for 2010-2011 school year.
#Code uses first year of school year, contrary to KDE naming conventions
df$Year[which(df$Year == 2012)] <- "2011a"
df$Year[which(df$Year == "2011")] <- "2010a"
df$Year[which(df$Year == "2010")] <- "2009a"
df$Year[which(df$Year == "2009")] <- "2008a"
df$Year[which(df$Year == "2008")] <- "2007a"
df$Year <- gsub("a", "", df$Year)
df$Year <- as.integer(df$Year)
#Save as R object to load in later script
wd <- getwd()
path <- "objects"
file <- "afgr.07.11"
file  <- paste (wd, path, file, sep = "/")
save(df, file = file)
df
source('~/Dropbox/R-Projects/kgp/R/functions_grads.R', echo=TRUE)
845/5
