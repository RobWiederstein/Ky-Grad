}
source('~/.active-rstudio-document', echo=TRUE)
a <- import_SAAR1999
a
read.csv(paste(getwd(), "/data_raw/SAAR1999.csv", sep = ""),
skip = 6,
nrow = 176,
header = TRUE,
fill = TRUE,
blank.lines.skip=TRUE,
strip.white = TRUE,
colClasses = c("character", rep("integer", 13
)
)
)
a <-     read.csv(paste(getwd(), "/data_raw/SAAR1999.csv", sep = ""),
skip = 6,
nrow = 176,
header = TRUE,
fill = TRUE,
blank.lines.skip=TRUE,
strip.white = TRUE,
colClasses = c("character", rep("integer", 13
)
)
)
View(a)
import_SAAR1999 <- function(){
a <- read.csv(paste(getwd(), "/data_raw/SAAR1999.csv", sep = ""),
skip = 6,
nrow = 176,
header = TRUE,
fill = TRUE,
blank.lines.skip=TRUE,
strip.white = TRUE,
colClasses = c("character", rep("integer", 13
)
)
)
a
}
rm (a)
SAAR1999 <- import_SAAR1999()
create_index <- function(){
district.index <- import_SAAR1999()[,1]        #school districts
district.index<-sub("^[0-9][0-9][0-9].", "" , district.index)     #remove number in front
district.index<-sub("Independent", "Independen", district.index) #add "t" to independent
district.index<-sub("Independen", "Independ", district.index)
district.index<-sub("Independ", "Independent", district.index)
district.index<-as.data.frame(district.index)
names(district.index)<-c("DISTRICT")
district.index
}
a <- create_index()
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source("functions_SAAR.R")
source("./R/functions_SAAR.R")
source("./R/functions_SAAR.R")
index <- create_index()
SAAR1999 <- spruce_SAAR1999(import_SAAR1999)
source('~/.active-rstudio-document', echo=TRUE)
source("./R/functions_SAAR.R")
index <- create_index()
SAAR1999 <- spruce_SAAR1999(import_SAAR1999)
SAAR1999 <- spruce_SAAR1999(import_SAAR1999())
View(index)
View(SAAR1999)
df <- merge  (index, SAAR1999, all = T, by = "DISTRICT")
View(df)
source('~/Dropbox/R-Projects/kgp/R/functions_SAAR.R', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
SAAR2000 <- spruce_SAAR2000(import_SAAR2000())
source("./R/functions_SAAR.R")
source("./R/functions_SAAR.R")
index <- create_index()
SAAR1999 <- spruce_SAAR1999(import_SAAR1999())
SAAR2000 <- spruce_SAAR2000(import_SAAR2000())
SAAR1999 <- spruce_SAAR1999(import_SAAR1999())
source("./R/functions_SAAR.R")
index <- create_index()
SAAR1999 <- spruce_SAAR1999(import_SAAR1999())
SAAR2000 <- spruce_SAAR2000(import_SAAR2000())
source('~/Dropbox/R-Projects/kgp/R/functions_SAAR.R', echo=TRUE)
source("./R/functions_SAAR.R")
source("./R/functions_SAAR.R")
index <- create_index()
SAAR1999 <- spruce_SAAR1999(import_SAAR1999())
SAAR2000 <- spruce_SAAR2000(import_SAAR2000())
#merge
df <- merge  (index, SAAR1999, SAAR2000, all = T, by = "DISTRICT")
df <- merge  (index, SAAR1999, all = T, by = "DISTRICT")
df <- merge  (SAAR1999, SAAR2000, all = T, by = "DISTRICT")
source('~/.active-rstudio-document', echo=TRUE)
SAAR2001 <- spruce_SAAR2001(import_SAAR2001())
df <- merge  (index, SAAR1999, all = T, by = "DISTRICT")
df <- merge  (df, SAAR2000, all = T, by = "DISTRICT")
df <- merge  (df, SAAR2001, all = T, by = "DISTRICT")
spruce_SAAR2001(import_SAAR2001())
SAAR2002 <- spruce_SAAR2002(import_SAAR2002())
source("./R/functions_SAAR.R")
SAAR2002 <- spruce_SAAR2002(import_SAAR2002())
import_SAAR2002 <- function(){
source("./R/functions_SAAR.R")
source("./R/functions_SAAR.R")
index <- create_index()
SAAR1999 <- spruce_SAAR1999(import_SAAR1999())
SAAR2000 <- spruce_SAAR2000(import_SAAR2000())
SAAR2001 <- spruce_SAAR2001(import_SAAR2001())
SAAR2002 <- spruce_SAAR2002(import_SAAR2002())
#merge
df <- merge  (index, SAAR1999, all = T, by = "DISTRICT")
df <- merge  (df, SAAR2000, all = T, by = "DISTRICT")
df <- merge  (df, SAAR2001, all = T, by = "DISTRICT")
df <- merge (df, SAAR2002, all = T, by = "DISTRICT")
rm(index)
source("./R/functions_SAAR.R")
dx <- create_index()
SAAR1999 <- spruce_SAAR1999(import_SAAR1999())
SAAR2000 <- spruce_SAAR2000(import_SAAR2000())
SAAR2001 <- spruce_SAAR2001(import_SAAR2001())
SAAR2002 <- spruce_SAAR2002(import_SAAR2002())
#merge
df <- merge  (dx, SAAR1999, all = T, by = "DISTRICT")
df <- merge  (df, SAAR2000, all = T, by = "DISTRICT")
df <- merge  (df, SAAR2001, all = T, by = "DISTRICT")
df <- merge  (df, SAAR2002, all = T, by = "DISTRICT")
source("./R/functions_SAAR.R")
SAAR2003 <- spruce_SAAR2003(import_SAAR2003())
df <- merge  (df, SAAR2002, all = T, by = "DISTRICT")
source('~/.active-rstudio-document', echo=TRUE)
source("./R/functions_SAAR.R")
source('~/Dropbox/R-Projects/kgp/R/main_SAAR.R', echo=TRUE)
source('~/Dropbox/R-Projects/kgp/R/main_SAAR.R', echo=TRUE)
warning()
warnings()
View(df)
warnings()
table(names(df))
names(df)
View(SAAR1999)
View(SAAR2000)
ob()
ls()
ls(list = "SAAR")
ls(pattern = "SAAR")
ls(pattern = "^SAAR")
names(SAAR1999)
dim(ls(pattern = "^SAAR"))
dim("dog")
dim(get(ls(pattern = "^SAAR")))
names((get(ls(pattern = "^SAAR")))
)
names((get(ls(pattern = "^SAAR")))
)
lapply(get(ls(pattern = "^SAAR"), names()))
?lapply
lapply(SAAR1999, names())
lapply(SAAR1999, names
)
sapply(SAAR1999, names)
sapply(SAAR1999, table)
sapply("SAAR1999", names)
sapply(get("SAAR1999"), names)
?get
get("%o%")
sapply(get(ls(pattern = "^SAAR")), names)
names(SAAR1999)
ls(pattern = "^SAAR")
a <- 4
get("a")
b <- 3
b <- 3
ls(pattern = "^a | ^b")
ls(pattern = "^(a | b)")
ls(pattern = "(a | b)")
ls()
ls(pattern = "^a")
ls(pattern = "^[ab]")
sapply(ls(pattern = "^[ab]"), get)
sapply(ls(pattern = "^[ab]"), get, length)
sapply(ls(pattern = "^[ab]"), get)
sum(sapply(ls(pattern = "^[ab]"), get))
names(get("SAAR1999"))
sapply(ls(pattern = "^[ab]"), get)
names(sapply(ls(pattern = "^SAAR"), get))
sapply(ls(pattern = "^SAAR"), get)
ls(pattern = "^SAAR")
l.df <- lapply(ls(pattern = "^SAAR"), get)
length(1999:2013)
lapply(df.l, names)
lapply(l.df, names)
rm(list = ls(pattern = "^SAAR"))
library(dplyr)
library(plyr)
?ldplyr
?ldply
?reshape
length(l.df$EL)
l.df$X10
l.df[1:10]$X10
l.df[1]$X10
l.df$$X10
l.df[[1'']]
l.df[[1]]
?as.list
??plyr
?reshape
append(a,b)
get(ls = ())
ls(pattern = "^a")
get(ls(pattern = "^a"))
get(ls(pattern = "^ab"))
ls(pattern = "^ab")
ls(pattern = "^")
ls(pattern = "^a")
ls(pattern = "^[ab]")
get(ls(pattern = "^[ab]"))
lapply(ls(pattern = "^[ab]", get))
ls(pattern = "^[ab]")
lapply(ls(pattern = "^[ab]"), length)
lapply(ls(pattern = "^[ab]"), get)
sapply(ls(pattern = "^[ab]"), get)
paste(sapply(ls(pattern = "^[ab]"), get), "a")
length( (sapply(ls(pattern = "^[ab]"), get), "a"))
paste(sapply(ls(pattern = "^[ab]"), get), "a")
length((sapply(ls(pattern = "^[ab]"), get))
)
source('~/Dropbox/R-Projects/kgp/R/functions_SAAR.R', echo=TRUE)
source('~/Dropbox/R-Projects/kgp/R/main_SAAR.R', echo=TRUE)
?reshape
reshape(SAAR1999, idvar = "DISTRICT")
reshape(SAAR1999, idvar = "DISTRICT", direction = "long")
reshape(SAAR1999, idvar = "DISTRICT", direction = "long")
reshape(SAAR1999, direction = "long")
reshape(SAAR1999, direction = "long", varying = "number")
state.x77 <- as.data.frame(state.x77)
View(state.x77)
long <- reshape(state.x77, idvar = "state", ids = row.names(state.x77),
times = names(state.x77), timevar = "Characteristic",
varying = list(names(state.x77)), direction = "long")
View(long)
dog <- c(A,B)
wt <- c(3,4)
dog <- c("A","B")
wt <- c(3,4)
data.frame(dog, cat, stringsAsFactors = F)
data.frame(rbind(dog, cat), stringsAsFactors = F)
data.frame(rbind(dog, cat), stringsAsFactors = F)
data.frame(rbind(dog, cat), stringsAsFactors = F)
data.frame(rbind(dog, wt), stringsAsFactors = F)
data.frame(cbind(dog, wt), stringsAsFactors = F)
df <- data.frame(cbind(dog, wt), stringsAsFactors = F)
reshape(df)
reshape(df, direction = "long")
reshape(df, direction = "long", varying = list(names(df)))
reshape(df, id = row.names(df), direction = "long", varying = list(names(df)))
source('~/Dropbox/R-Projects/kgp/R/functions_SAAR.R', echo=TRUE)
source('~/Dropbox/R-Projects/kgp/R/main_SAAR.R', echo=TRUE)
a <- rbind(SAAR1999, SAAR2000)
?append
?merge
rbind(SAAR2007, SAAR2008)
?rbind
cbind(1, 1:7)
rbind(1, 1:7)
?merge
ls(pattern = "^SAAR")
get(ls(pattern = "^SAAR"))
df.l <- lapply(ls(pattern = "^SAAR"), get)
lapply(df.1, names)
lapply(df.1, names)
lapply(df.l, names)
table(sapply(df.l, names))
sapply(df.l, names)
View(SAAR2010)
?reshape
library(reshape)
?reshape
SAAR1999 <- spruce_SAAR1999(import_SAAR1999())
source("./R/functions_SAAR.R")
SAAR1999 <- spruce_SAAR1999(import_SAAR1999())
?melt
melt(SAAR, id.vars = "DISTRICT", variable_name = "number")
melt(SAAR1999, id.vars = "DISTRICT", variable_name = "number")
head(melt(SAAR1999, id.vars = "DISTRICT", variable_name = "number"), 20)
head(melt(SAAR1999, id.vars = "DISTRICT", variable_name = "grade"), 20)
temp <- SAAR1999
temp <- SAAR1999
temp$year <- rep(1999, nrow(temp))
names(SAAR1999)
grep("DISTRICT", names(SAAR1999))
gsub("DISTRICT", "district", names(SAAR1999))
tolower(names(SAAR1999))
temp <- SAAR1999
temp$year <- rep(1999, nrow(temp))
names(temp)
tolower(names(temp))
temp <- melt(temp, id.vars = c("year", "district"), variable_name = "grade")
temp <- SAAR1999
temp$year <- rep(1999, nrow(temp))
names(temp) <- tolower(names(temp))
temp <- melt(temp, id.vars = c("year", "district"), variable_name = "grade")
View(temp)
source("./R/functions_SAAR.R")
source("./R/functions_SAAR.R")
SAAR1999 <- wide_2_long(spruce_SAAR1999(import_SAAR1999()))
SAAR2000 <- wide_2_long(spruce_SAAR2000(import_SAAR2000()))
rm(temp)
SAAR2001 <- wide_2_Long(spruce_SAAR2001(import_SAAR2001()))
SAAR2001 <- wide_2_long(spruce_SAAR2001(import_SAAR2001()))
SAAR2002 <- wide_2_long(spruce_SAAR2002(import_SAAR2002()))
source("./R/functions_SAAR.R")
SAAR1999 <- spruce_SAAR1999(import_SAAR1999())
temp <- SAAR1999
library(reshape)
temp$year <- rep(1999, nrow(temp))
names(temp) <- tolower(names(temp))
temp <- melt(temp, id.vars = c("year", "district"), variable_name = "grade")
a <- 1
ls(pattern = "a")
ls(pattern = "^[a]")
ls(pattern = "^[S]")
a
get("a")
stick <- function(thing = a){
print(paste(a, "1"))
}
stick(a)
stick <- function(thing){
print(paste(thing, "1"))
}
stick(a)
stick <- function(thing){
print(paste(thing, "1"))
print(ls(pattern = "*"))
}
stick(a)
stick <- function(thing){
print(paste(thing, "1"))
print(as.character(thing))
}
stick(a)
stick("a")
stick <- function(thing){
print(as.character(thing))
}
stick(a)
stick("a")
stick <- function(thing){
print(as.character(thing))
print(get("thing"))
}
stick(a)
SAAR1999 <- 1
stick <- function(thing){
print(as.character(thing))
print(get("thing"))
}
stick(SAAR1999)
stick("SAAR1999")
stick <- function(thing){
print(as.character(thing))
print(get(thing))
}
stick(SAAR1999)
get("SAAR1999")
stick <- function(thing){
print(as.character(thing))
print(get("thing"))
}
stick(SAAR1999)
stick("SAAR1999")
ls(pattern = "^SAAR")
SAAR1999 <- 1
year <- ls(pattern = "^SAAR")
?substring
year <- substr(ls(pattern = "^SAAR"), 4, 8)
year <- substr(ls(pattern = "^SAAR"), 5, 8)
SAAR1999 <- spruce_SAAR1999(import_SAAR1999())
names <- ls(pattern = "^SAAR")
year <- substr(ls(pattern = "^SAAR"), 5, 8)
SAAR1999$year <- rep(year, nrow(SAAR1999))
?ls
?mget
mget(a)
mget("a")
unlist(mget("a"))
get("a")
source('~/Dropbox/R-Projects/kgp/R/main_SAAR.R', echo=TRUE)
source('~/Dropbox/R-Projects/kgp/R/main_SAAR.R', echo=TRUE)
source('~/Dropbox/R-Projects/kgp/R/main_SAAR.R', echo=TRUE)
source('~/Dropbox/R-Projects/kgp/R/main_SAAR.R', echo=TRUE)
source('~/Dropbox/R-Projects/kgp/R/main_SAAR.R', echo=TRUE)
names <- ls(pattern = "^SAAR")
year <- substr(ls(names, 5, 8)
year <- substr(ls(names, 5, 8))
names <- ls(pattern = "^SAAR")
year <- substr(ls(names, 5, 8))
names <- ls(pattern = "^SAAR")
year <- substr(names, 5, 8)
env()
?as.environment
stick <- function(thing){
stick <- function(thing){
print(as.character(thing))
}
stick(SAAR1999)
stick <- function(thing){
print(as.character(thing))
}
stick(SAAR1999)
stick <- function(thing){
print(ls(pattern = "^SAAR"))
stick <- function(thing){
print(ls(pattern = "^SAAR"))
}
stick(SAAR1999)
stick <- function(thing){
print(ls(pattern = "^SAAR"))
}
stick(SAAR1999)
stick <- function(thing){
print(ls(pattern = "^SAAR", environ = -1L))
}
stick(SAAR1999)
wide_2_long_1999 <- function(temp){
library(reshape)
temp$year <- rep(1999, nrow(temp))
names(temp) <- tolower(names(temp))
temp <- melt(temp, id.vars = c("year", "district"), variable_name = "grade")
}
SAAR1999 < wide_2_long_1999(SAAR1999)
wide_2_long_1999 <- function(temp){
library(reshape)
temp$year <- rep(1999, nrow(temp))
names(temp) <- tolower(names(temp))
temp <- melt(temp, id.vars = c("year", "district"), variable_name = "grade")
}
SAAR1999 <- wide_2_long_1999(SAAR1999)
source("./R/functions_SAAR.R")
SAAR1999 <- wide_2_long_1999(spruce_SAAR1999(import_SAAR1999()))
SAAR2000 <- wide_2_long_2000(spruce_SAAR2000(import_SAAR2000()))
SAAR2001 <- wide_2_long_2001(spruce_SAAR2001(import_SAAR2001()))
SAAR2002 <- wide_2_long_2002(spruce_SAAR2002(import_SAAR2002()))
SAAR2003 <- wide_2_long_2003(spruce_SAAR2003(import_SAAR2003()))
SAAR2004 <- wide_2_long_2004(spruce_SAAR2004(import_SAAR2004()))
SAAR2005 <- wide_2_long_2005(spruce_SAAR2005(import_SAAR2005()))
SAAR2006 <- wide_2_long_2006(spruce_SAAR2006(import_SAAR2006()))
SAAR2007 <- wide_2_long_2007(spruce_SAAR2007(import_SAAR2007()))
SAAR2008 <- wide_2_long_2008(spruce_SAAR2008(import_SAAR2008()))
SAAR2009 <- wide_2_long_2009(spruce_SAAR2009(import_SAAR2009()))
SAAR2010 <- wide_2_long_2010(spruce_SAAR2010(import_SAAR2010()))
SAAR2011 <- wide_2_long_2011(spruce_SAAR2011(import_SAAR2011()))
SAAR2012 <- wide_2_long_2012(spruce_SAAR2012(import_SAAR2012()))
SAAR2013 <- wide_2_long_2013(spruce_SAAR2013(import_SAAR2013()))
?do.call
ls(pattern = "^SAAR...")
mget(ls(pattern = "^SAAR..."))
a <- rbind(mget(ls(pattern = "^SAAR...")))
a <- data.frame(rbind(mget(ls(pattern = "^SAAR..."))))
View(a)
a <- rbind(mget(ls(pattern = "^SAAR...")))
View(a)
?rbind
a <- rbind(SAAR1999, SAAR2000, SAAR2001)
paste("SAAR", 1999:2013)
paste("SAAR", 1999:2013, sep = "")
mget(paste("SAAR", 1999:2013, sep = ""))
a <- rbind(mget(paste("SAAR", 1999:2013, sep = "")))
a <- data.frame(rbind(mget(paste("SAAR", 1999:2013, sep = ""))))
paste("SAAR", 1999:2013, sep = "")
?print
print(paste("SAAR", 1999:2013, sep = ""), quote = F)
df <- rbind(SAAR1999, SAAR2000, SAAR2001, SAAR2002, SAAR2003, SAAR2004,
SAAR2005, SAAR2006, SAAR2007, SAAR2008, SAAR2009, SAAR2010,
SAAR2011, SAAR2012, SAAR2013
)
View(df)
rm (a)
class(df)
df <- data.frame(
rbind(
SAAR1999, SAAR2000, SAAR2001, SAAR2002, SAAR2003, SAAR2004,
SAAR2005, SAAR2006, SAAR2007, SAAR2008, SAAR2009, SAAR2010,
SAAR2011, SAAR2012, SAAR2013
),
stringsAsFactors = F
)
?I
unique(df$grade)
nrow(subset(df, grade == "x8"))
nrow(subset(df, district == "Adair County" & grade == "x8"))
subset(df, district == "Adair County" & grade == "x8")
subset(df, year == 2013 & grade == "x8")
nrow(subset(df, year == 2013 & grade == "x8"))
?save
save(df, file = SAAR_1999_2013.RData)
save(df, file = "./objects")
save(df, file = "./objects/")
save(df, file = "saar")
unlink("saar")
home <- getwd()
home
dir <- "objects"
home <- getwd()
dir <- "objects"
file <- "saar_1999_2013"
myfile <- paste(home, dir, file, sep = "/")
myfile
save(df, file = myfile)
rm(list = ls())
